From: Talat Batheesh <talatb@mellanox.com>
Subject: [PATCH] BACKPORT:
 drivers/net/ethernet/mellanox/mlx5/core/en/port_buffer.c

Change-Id: I34f057b4165bfad79811e3c8bc04df1bf6a89e1d
---
 drivers/net/ethernet/mellanox/mlx5/core/en/port_buffer.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en/port_buffer.c b/drivers/net/ethernet/mellanox/mlx5/core/en/port_buffer.c
index xxxxxxx..xxxxxxx 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en/port_buffer.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en/port_buffer.c
@@ -31,6 +31,8 @@
  */
 #include "port_buffer.h"
 
+#ifdef HAVE_IEEE_DCBNL_ETS
+#ifdef CONFIG_MLX5_CORE_EN_DCB
 int mlx5e_port_query_buffer(struct mlx5e_priv *priv,
 			    struct mlx5e_port_buffer *port_buffer)
 {
@@ -332,3 +334,5 @@ int mlx5e_port_manual_buffer_config(struct mlx5e_priv *priv,
 
 	return err;
 }
+#endif
+#endif
