From: Eli Cohen <eli@mellanox.com>
Subject: [PATCH] BACKPORT: drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun.h

Change-Id: I6c8783f628e5bfe6dda4c36ba314400db4005d47
---
 drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun.h | 13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)

diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun.h b/drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun.h
index xxxxxxx..xxxxxxx 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun.h
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun.h
@@ -19,8 +19,11 @@ enum {
 
 int mlx5e_tc_tun_init_encap_attr(struct net_device *tunnel_dev,
 				 struct mlx5e_priv *priv,
-				 struct mlx5e_encap_entry *e,
-				 struct netlink_ext_ack *extack);
+				 struct mlx5e_encap_entry *e
+#ifdef HAVE_TC_CLS_OFFLOAD_EXTACK
+				 , struct netlink_ext_ack *extack
+#endif
+				 );
 
 int mlx5e_tc_tun_create_header_ipv4(struct mlx5e_priv *priv,
 				    struct net_device *mirred_dev,
@@ -39,6 +42,10 @@ int mlx5e_tc_tun_parse(struct net_device *filter_dev,
 		       struct mlx5_flow_spec *spec,
 		       struct tc_cls_flower_offload *f,
 		       void *headers_c,
-		       void *headers_v, u8 *match_level);
+		       void *headers_v, u8 *match_level
+#ifndef HAVE_TC_SETUP_FLOW_ACTION
+		       , struct flow_rule *rule
+#endif
+						       );
 
 #endif //__MLX5_EN_TC_TUNNEL_H__
